<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GRCC Color Pizza - Token Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Fondo moderno y futurista */
        body {
            background: linear-gradient(135deg, #1f2937, #111827);
            font-family: 'Inter', sans-serif;
            color: white;
        }

        /* Cuadrado gris claro en el centro */
        .card {
            background-color: #d1d5db;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }

        /* Colores de los botones */
        .btn-primary {
            background-color: #8b5cf6;
            color: white;
        }

        .btn-secondary {
            background-color: #ec4899;
            color: white;
        }

        .btn-tertiary {
            background-color: #3b82f6;
            color: white;
        }
    </style>
</head>
<body>
    <div class="flex items-center justify-center min-h-screen">
        <div class="card max-w-md mx-auto text-center">
            <h1 class="text-2xl font-bold mb-6">GRCC Color Pizza - Token Management</h1>

            <div class="mb-4">
                <button id="connectButton" class="btn-primary py-2 px-4 rounded mb-2">Connect Wallet</button>
                <div id="accountAddress" class="text-sm mt-2"></div>
            </div>

            <div class="mb-4">
                <button id="balanceButton" class="btn-secondary py-2 px-4 rounded mb-2">Check Token Balance</button>
                <div id="balance" class="text-sm mt-2"></div>
            </div>

            <div class="mb-4">
                <button id="buyButton" class="btn-tertiary py-2 px-4 rounded mb-2">Buy Pizza (Get Tokens)</button>
            </div>

            <div class="mb-4">
                <input type="text" id="recipientAddress" placeholder="Recipient Address" class="text-black py-2 px-4 rounded mb-2 w-full">
                <input type="number" id="amount" placeholder="Amount" class="text-black py-2 px-4 rounded mb-2 w-full">
                <button id="transferButton" class="btn-primary py-2 px-4 rounded mb-2">Transfer Tokens</button>
            </div>

            <div class="mb-4">
                <button id="totalSupplyButton" class="btn-secondary py-2 px-4 rounded mb-2">Total Tokens in Circulation</button>
                <div id="totalSupply" class="text-sm mt-2"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.ethers.io/lib/ethers-5.2.esm.min.js"></script>
    <script>
        const contractAddress = "0xdA66cbfe319C5db830B661df34D219AD3dEF7Fb2";
        const abi = [/* ABI */];

        let provider;
        let signer;
        let contract;

        document.getElementById("connectButton").addEventListener("click", async () => {
            if (typeof window.ethereum !== "undefined") {
                provider = new ethers.providers.Web3Provider(window.ethereum);
                await provider.send("eth_requestAccounts", []);
                signer = provider.getSigner();
                contract = new ethers.Contract(contractAddress, abi, signer);
                const accountAddress = await signer.getAddress();
                document.getElementById("accountAddress").innerText = `Connected: ${accountAddress}`;
            } else {
                alert("0x2F118Bbe89cA09a94EB83986EbBc4b532d9c1f0E);
            }
        });

        document.getElementById("balanceButton").addEventListener("click", async () => {
            const balance = await contract.balanceOf(await signer.getAddress());
            document.getElementById("balance").innerText = `Balance: ${ethers.utils.formatUnits(balance, 18)} GRCC`;
        });

        document.getElementById("buyButton").addEventListener("click", async () => {
            const tx = await contract.ComprarPizza({ value: ethers.utils.parseEther("0.5") });
            await tx.wait();
            alert("Pizza bought and tokens received!");
        });

        document.getElementById("transferButton").addEventListener("click", async () => {
            const recipient = document.getElementById("recipientAddress").value;
            const amount = document.getElementById("amount").value;
            const tx = await contract.transfer(recipient, ethers.utils.parseUnits(amount, 18));
            await tx.wait();
            alert("Tokens transferred!");
        });

        document.getElementById("totalSupplyButton").addEventListener("click", async () => {
            const totalSupply = await contract.totalencirculacion();
            document.getElementById("totalSupply").innerText = `Total Supply: ${ethers.utils.formatUnits(totalSupply, 18)} GRCC`;
        });
    </script>
</body>
</html>
